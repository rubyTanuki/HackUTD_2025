<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thesis Upload</title>

  <!-- TailwindCSS for modern styling -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 font-sans p-8">
  <div class="max-w-3xl mx-auto">
    <h2 class="text-2xl font-semibold mb-6 text-gray-800">Upload or Type Your Thesis</h2>

    <!-- üß† Thesis text input -->
    <textarea id="dataInput"
      rows="8"
      class="w-full p-4 mb-6 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"
      placeholder="Type or paste your thesis here..."></textarea>

    <!-- üìÇ Modern Dropzone -->
    <div class="flex items-center justify-center w-full">
      <label for="fileInput"
        class="flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition">
        <div class="flex flex-col items-center justify-center pt-5 pb-6 text-center">
          <svg class="w-8 h-8 mb-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 16">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5
                 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4
                 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"/>
          </svg>
          <p class="mb-2 text-sm text-gray-600"><span class="font-semibold">Click to upload</span> or drag and drop</p>
          <p class="text-xs text-gray-500">PDF (MAX. 10 MB)</p>
        </div>
        <input id="fileInput" type="file" class="hidden" accept=".pdf" />
      </label>
    </div>

    <!-- üßæ File status -->
    <p id="fileStatus" class="text-center mt-3 text-gray-600">No file selected.</p>

    <!-- üöÄ Upload button -->
    <div class="text-center mt-8">
      <button onclick="uploadData()"
        class="bg-blue-600 text-white px-8 py-3 rounded-md text-lg hover:bg-blue-700 transition">
        Upload
      </button>
    </div>

    <!-- üß© Output debug area -->
    <pre id="output" class="mt-6 p-4 bg-gray-100 rounded-lg overflow-x-auto text-sm text-gray-800 whitespace-pre-wrap"></pre>
  </div>

  <script>
    // ‚úÖ Handle file selection display
    document.getElementById("fileInput").addEventListener("change", () => {
      const file = document.getElementById("fileInput").files[0];
      const fileStatus = document.getElementById("fileStatus");

      if (file) {
        const sizeMB = (file.size / (1024 * 1024)).toFixed(2);
        fileStatus.textContent = `File uploaded: ${file.name} (${sizeMB} MB)`;
        fileStatus.classList.add("text-green-600");
      } else {
        fileStatus.textContent = "No file selected.";
        fileStatus.classList.remove("text-green-600");
      }
    });

    // ‚úÖ Mock upload and redirect
    async function uploadData() {
      const textarea = document.getElementById("dataInput");
      const textData = textarea.value.trim();
      const output = document.getElementById("output");

      if (!textData) {
        alert("Please enter a thesis before uploading!");
        return;
      }

      output.textContent = "Uploading...";

      // üîß Mock backend response for testing
      const mockResponse = {
        response_code: "200",
        quote: "‚ÄúArtificial Intelligence is not a threat, but a tool ‚Äî its impact depends on the hands that use it.‚Äù",
        results: [
          {
            title: "AI and the Future of Learning",
            description: "Examines how AI tools adapt to student learning styles.",
            keywords: ["AI", "Education", "Adaptive Learning"],
            why_chosen: "Matches your thesis focus on personalization.",
            link: "#"
          },
          {
            title: "Ethics in Machine Learning Systems",
            description: "Explores fairness and ethical dilemmas in AI.",
            keywords: ["Ethics", "Bias", "Machine Learning"],
            why_chosen: "Relates to your concern about bias and responsibility.",
            link: "#"
          },
          {
            title: "The Role of Automation in Modern Classrooms",
            description: "Studies how automation transforms teaching approaches.",
            keywords: ["Automation", "Teaching", "Innovation"],
            why_chosen: "Shows real-world applications of your thesis ideas.",
            link: "#"
          }
        ]
      };

      // üß† Save mock data locally
      localStorage.setItem("uploadedThesis", textData);
      localStorage.setItem("backendResponse", JSON.stringify(mockResponse));

      // ‚úÖ Redirect to results page
      window.location.href = "results.html";
    }
  </script>
</body>
</html>
